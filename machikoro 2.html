<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<title>è¡—ã“ã‚ - CPUå¯¾æˆ¦ç‰ˆ</title>
<style>
  body { font-family: sans-serif; text-align: center; background: #f8f8f8; }
  h1 { color: #333; }
  #log { width: 90%; max-width: 600px; margin: 10px auto; height: 200px; overflow-y: auto; border: 1px solid #ccc; padding: 5px; background: #fff; text-align: left; }
  button { margin: 5px; padding: 10px 20px; }
</style>
</head>
<body>
<h1>è¡—ã“ã‚ ğŸ² CPUå¯¾æˆ¦</h1>
<div>
  <p>ã‚ãªãŸã®ã‚³ã‚¤ãƒ³: <span id="playerCoins">3</span> ï½œ CPUã®ã‚³ã‚¤ãƒ³: <span id="cpuCoins">3</span></p>
  <p>ã‚ãªãŸã®ãƒ©ãƒ³ãƒ‰ãƒãƒ¼ã‚¯: <span id="playerLM">0</span> / 4 ï½œ CPUã®ãƒ©ãƒ³ãƒ‰ãƒãƒ¼ã‚¯: <span id="cpuLM">0</span> / 4</p>
</div>
<div>
  <button onclick="playerTurn()">ğŸ² ã‚µã‚¤ã‚³ãƒ­ã‚’æŒ¯ã‚‹</button>
</div>
<div id="log"></div>

<script>
let playerCoins = 3, cpuCoins = 3;
let playerLM = 0, cpuLM = 0;
let turn = "player";

function log(msg) {
  const logDiv = document.getElementById("log");
  logDiv.innerHTML += msg + "<br>";
  logDiv.scrollTop = logDiv.scrollHeight;
}

function updateUI() {
  document.getElementById("playerCoins").innerText = playerCoins;
  document.getElementById("cpuCoins").innerText = cpuCoins;
  document.getElementById("playerLM").innerText = playerLM;
  document.getElementById("cpuLM").innerText = cpuLM;
}

function rollDice() {
  return Math.floor(Math.random() * 6) + 1;
}

function buildLandmark(player) {
  if (player === "player" && playerCoins >= 4) {
    playerCoins -= 4; playerLM++;
    log("ã‚ãªãŸã¯ãƒ©ãƒ³ãƒ‰ãƒãƒ¼ã‚¯ã‚’å»ºè¨­ã—ã¾ã—ãŸï¼");
  } else if (player === "cpu" && cpuCoins >= 4) {
    cpuCoins -= 4; cpuLM++;
    log("CPUã¯ãƒ©ãƒ³ãƒ‰ãƒãƒ¼ã‚¯ã‚’å»ºè¨­ã—ã¾ã—ãŸï¼");
  }
}

function checkWin() {
  if (playerLM >= 4) {
    log("<b>ğŸ‰ ã‚ãªãŸã®å‹ã¡ï¼</b>");
    return true;
  }
  if (cpuLM >= 4) {
    log("<b>ğŸ’» CPUã®å‹ã¡ï¼</b>");
    return true;
  }
  return false;
}

function playerTurn() {
  if (turn !== "player") return;
  const dice = rollDice();
  log("ã‚ãªãŸã®å‡ºç›®: " + dice);
  playerCoins += dice % 2 === 0 ? 2 : 1; // ç°¡æ˜“ãƒ«ãƒ¼ãƒ«
  buildLandmark("player");
  updateUI();
  if (checkWin()) return;
  turn = "cpu";
  setTimeout(cpuTurn, 1000);
}

function cpuTurn() {
  const dice = rollDice();
  log("CPUã®å‡ºç›®: " + dice);
  cpuCoins += dice % 2 === 0 ? 2 : 1;
  buildLandmark("cpu");
  updateUI();
  if (checkWin()) return;
  turn = "player";
  log("ğŸ‘‰ ã‚ãªãŸã®ã‚¿ãƒ¼ãƒ³ã§ã™");
}
</script>
</body>
</html>
